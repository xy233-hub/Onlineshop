
网上商城系统

通用响应结构

通用响应格式：
{
code: Number,        // 状态码（200为成功，其他为错误码）
message: String,     // 操作提示信息
data: Object | Array | null  // 响应数据（无数据时为null）
}

通用状态码说明：
200：成功
400：参数错误
401：未授权/鉴权失败
403：无权限
404：资源不存在
500：服务器内部错误

一、商品相关接口

1. /api/product（GET）- 获取当前在售商品信息
   请求：无（GET 方法，无请求体）
   返回：
   {
   code: Number,
   message: String,
   data: {
   product_id: Number,  // 商品ID（整数，主键）
   product_name: String,  // 商品名称
   product_desc: String,  // 商品描述（文本类型）
   image_url: String,     // 商品图片路径/链接
   price: Number,         // 商品价格（数字，支持小数）
   product_status: String,  // 商品状态（枚举："online"、"frozen"、"sold"）
   created_at: String,    // 上架时间（时间戳格式，如"yyyy-MM-dd HH:mm:ss"）
   updated_at: String     // 最后更新时间（时间戳格式）
   }
   }

2. /api/product/purchase（POST）- 提交购买意向
   请求：
   {
   customer_name: String,   // 顾客姓名
   customer_phone: String,  // 顾客联系电话
   customer_address: String  // 顾客收货地址
   }
   返回：
   {
   code: Number,
   message: String,
   data: {
   purchase_id: Number,   // 购买意向ID（整数，主键）
   product_id: Number,    // 关联商品ID（整数）
   purchase_status: String,  // 初始状态："pending"（待处理）
   created_at: String     // 意向提交时间（时间戳格式）
   }
   }

3. /api/seller/product（POST）- 发布新商品（卖家权限）
   请求：
   {
   product_name: String,   // 商品名称
   product_desc: String,   // 商品详细描述
   image_url: String,      // 商品图片路径/链接
   price: Number           // 商品价格
   }
   返回：
   {
   code: Number,
   message: String,
   data: {
   product_id: Number,    // 新商品ID（整数，自增）
   product_status: String,  // 初始状态："online"（在线可购买）
   created_at: String     // 上架时间（时间戳格式）
   }
   }

4. /api/seller/products（GET）- 查看历史商品（卖家权限）
   请求：无（GET 方法，无请求体）
   返回：
   {
   code: Number,
   message: String,
   data: [
   {
   product_id: Number,
   product_name: String,
   product_desc: String,
   image_url: String,
   price: Number,
   product_status: String,  // 状态："online"、"frozen"、"sold"
   created_at: String,      // 上架时间
   updated_at: String       // 最后更新时间（如冻结/售出时更新）
   }
   ]
   }

5. /api/seller/product/freeze（PUT）- 冻结商品（卖家权限）
   请求：
   {
   product_id: Number  // 需冻结的商品ID（整数）
   }
   返回：
   {
   code: Number,
   message: String,
   data: {
   product_id: Number,
   product_status: String,  // 状态更新为："frozen"（已冻结）
   updated_at: String       // 冻结时间（最后更新时间）
   }
   }

6. /api/seller/product/unfreeze（PUT）- 恢复商品上线（卖家权限）
   请求：
   {
   product_id: Number  // 需恢复的商品ID（整数）
   }
   返回：
   {
   code: Number,
   message: String,
   data: {
   product_id: Number,
   product_status: String,  // 状态更新为："online"（在线可购买）
   updated_at: String       // 恢复时间（最后更新时间）
   }
   }

7. /api/seller/product/mark-sold（PUT）- 标记商品为已售出（卖家权限，交易成功后）
   请求：
   {
   product_id: Number  // 需标记为售出的商品ID（整数）
   }
   返回：
   {
   code: Number,
   message: String,
   data: {
   product_id: Number,
   product_status: String,  // 状态更新为："sold"（已售出）
   updated_at: String       // 售出时间（最后更新时间）
   }
   }

二、卖家相关接口

8. /api/seller/login（POST）- 卖家登录
   请求：
   {
   username: String,  // 卖家登录用户名
   password: String   // 卖家登录密码（加密存储，请求时传明文）
   }
   返回：
   {
   code: Number,
   message: String,
   data: {
   token: String,    // 身份令牌（用于后续接口鉴权）
   seller_info: {
   seller_id: Number,  // 卖家ID（整数，主键）
   username: String,   // 卖家用户名
   create_time: String  // 账号创建时间（时间戳格式）
   }
   }
   }

9. /api/seller/password（PUT）- 修改密码（卖家权限）
   请求：
   {
   old_password: String,  // 原密码
   new_password: String   // 新密码
   }
   返回：
   {
   code: Number,
   message: String,
   data: null  // 无数据
   }

10. /api/seller/purchase-intents（GET）- 查看购买意向信息（卖家权限）
    请求：无（需在请求头携带令牌，如 Authorization: Bearer {token}）
    返回：
    {
    code: Number,
    message: String,
    data: [
    {
    purchase_id: Number,    // 意向ID（整数，主键）
    product_id: Number,     // 关联商品ID
    customer_name: String,  // 顾客姓名
    customer_phone: String, // 顾客电话
    customer_address: String, // 顾客地址
    purchase_status: String, // 交易状态："pending"、"success"、"failed"
    created_at: String,     // 意向提交时间
    updated_at: String      // 状态最后更新时间
    }
    ]
    }

11. /api/seller/purchase-intents/update-status（PUT）- 更新购买意向状态（卖家权限，如交易成功 / 失败）
    请求：
    {
    purchase_id: Number,    // 意向ID
    new_status: String      // 新状态："success"（交易成功）或"failed"（交易失败）
    }
    返回：
    {
    code: Number,
    message: String,
    data: {
    purchase_id: Number,
    purchase_status: String,  // 更新后的状态
    updated_at: String       // 状态更新时间
    }
    }

好的，下面是每个接口的返回示例，已在响应结构中明确标注 `code` 状态码字段，特殊情况也已注明：

---

**商品相关接口**

1. `/api/product`（GET）  
   返回：
   ```json
   {
     "code": 200,
     "message": "获取成功",
     "data": {}
   }
   ```
   商品不存在：
   ```json
   {
     "code": 404,
     "message": "商品不存在",
     "data": null
   }
   ```

2. `/api/product/purchase`（POST）  
   成功：
   ```json
   {
     "code": 200,
     "message": "提交成功",
     "data": {}
   }
   ```
   参数错误：
   ```json
   {
     "code": 400,
     "message": "参数错误",
     "data": null
   }
   ```

3. `/api/seller/product`（POST）  
   成功：
   ```json
   {
     "code": 200,
     "message": "发布成功",
     "data": {}
   }
   ```
   未授权：
   ```json
   {
     "code": 401,
     "message": "未授权",
     "data": null
   }
   ```

4. `/api/seller/products`（GET）  
   成功：
   ```json
   {
     "code": 200,
     "message": "查询成功",
     "data": []
   }
   ```
   未授权：
   ```json
   {
     "code": 401,
     "message": "未授权",
     "data": null
   }
   ```

5. `/api/seller/product/freeze`（PUT）  
   成功：
   ```json
   {
     "code": 200,
     "message": "冻结成功",
     "data": {}
   }
   ```
   商品不存在：
   ```json
   {
     "code": 404,
     "message": "商品不存在",
     "data": null
   }
   ```

6. `/api/seller/product/unfreeze`（PUT）  
   成功：
   ```json
   {
     "code": 200,
     "message": "恢复成功",
     "data": {}
   }
   ```

7. `/api/seller/product/mark-sold`（PUT）  
   成功：
   ```json
   {
     "code": 200,
     "message": "标记售出成功",
     "data": {}
   }
   ```

---

**卖家相关接口**

8. `/api/seller/login`（POST）  
   登录成功：
   ```json
   {
     "code": 200,
     "message": "登录成功",
     "data": {}
   }
   ```
   登录失败：
   ```json
   {
     "code": 401,
     "message": "用户名或密码错误",
     "data": null
   }
   ```

9. `/api/seller/password`（PUT）  
   修改成功：
   ```json
   {
     "code": 200,
     "message": "修改成功",
     "data": null
   }
   ```
   原密码错误：
   ```json
   {
     "code": 400,
     "message": "原密码错误",
     "data": null
   }
   ```

10. `/api/seller/purchase-intents`（GET）  
    成功：
    ```json
    {
      "code": 200,
      "message": "查询成功",
      "data": []
    }
    ```

11. `/api/seller/purchase-intents/update-status`（PUT）  
    成功：
    ```json
    {
      "code": 200,
      "message": "状态更新成功",
      "data": {}
    }
    ```
    意向不存在：
    ```json
    {
      "code": 404,
      "message": "意向不存在",
      "data": null
    }
    ```

---

所有接口均按上述格式返回，`code` 字段即为状态码。