import{_ as h,c as r,b as t,a as c,F as p,g as _,t as n,o as l,n as k}from"./index-5YFhHKL4.js";const f={name:"SellerPurchaseIntents",data(){return{intents:[],error:""}},mounted(){this.fetchIntents()},methods:{async fetchIntents(){this.error="";const u=localStorage.getItem("seller_token"),a=await(await fetch("/api/seller/purchase-intents",{headers:{Authorization:`Bearer ${u}`}})).json();a.code===200?this.intents=a.data:this.error=a.message},async updateStatus(u,s){const a=localStorage.getItem("seller_token");await fetch("/api/seller/purchase-intents/update-status",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({purchase_id:u,new_status:s})}),this.fetchIntents()}}},b={class:"seller-purchase-intents-wrapper"},g={class:"seller-purchase-intents-card"},y=["onClick"],I=["onClick"],S={key:0,class:"error"};function C(u,s,a,m,o,d){return l(),r("div",b,[t("div",g,[s[2]||(s[2]=t("h2",null,"购买意向管理",-1)),t("table",null,[s[1]||(s[1]=t("thead",null,[t("tr",null,[t("th",null,"意向ID"),t("th",null,"商品ID"),t("th",null,"顾客姓名"),t("th",null,"电话"),t("th",null,"地址"),t("th",null,"状态"),t("th",null,"操作")])],-1)),t("tbody",null,[(l(!0),r(p,null,_(o.intents,e=>(l(),r("tr",{key:e.purchase_id},[t("td",null,n(e.purchase_id),1),t("td",null,n(e.product_id),1),t("td",null,n(e.customer_name),1),t("td",null,n(e.customer_phone),1),t("td",null,n(e.customer_address),1),t("td",null,[t("span",{class:k(["status",e.purchase_status])},n(e.purchase_status==="pending"?"待处理":e.purchase_status==="success"?"成功":"失败"),3)]),t("td",null,[e.purchase_status==="pending"?(l(),r("button",{key:0,class:"success-btn",onClick:i=>d.updateStatus(e.purchase_id,"success")},"交易成功",8,y)):c("",!0),e.purchase_status==="pending"?(l(),r("button",{key:1,class:"fail-btn",onClick:i=>d.updateStatus(e.purchase_id,"failed")},"交易失败",8,I)):c("",!0)])]))),128))])]),o.error?(l(),r("div",S,n(o.error),1)):c("",!0),t("button",{class:"back-btn",onClick:s[0]||(s[0]=e=>u.$router.back())},"返回")])])}const w=h(f,[["render",C],["__scopeId","data-v-7540a391"]]);export{w as default};
