# 在线购物系统构建手册

## 1. 构建工具和版本要求

### 后端构建工具

- **Maven**: 3.8.0 或更高版本
- **Java JDK**: 17 或更高版本
- **构建命令**: `mvn clean package`

### 前端构建工具

- **Node.js**: 16.x 或更高版本
- **npm**: 8.x 或更高版本 (通常随 Node.js 一起安装)
- **构建命令**: `npm run build`

## 2. 安装要求

### 后端环境安装

1. **安装 Java JDK 17:**
   - 从 Oracle 或 OpenJDK 下载并安装 JDK 17
   - 配置 JAVA_HOME 环境变量
   - 将 %JAVA_HOME%\bin 添加到 PATH 环境变量
2. **安装 Maven:**
   - 从 [Maven官网](https://maven.apache.org/download.cgi) 下载最新版本
   - 解压到指定目录
   - 配置 MAVEN_HOME 环境变量
   - 将 %MAVEN_HOME%\bin 添加到 PATH 环境变量

​    **3.验证安装：**

```bash
java -version
mvn -version
```

### 前端环境安装

1. 安装 Node.js:

   - 从 [Node.js官网](https://nodejs.org/) 下载并安装 LTS 版本

   - 验证安装:

     ```bash
     bashnode --version
     npm --version
     ```

## 3. 构建步骤

### 后端构建步骤

1. 进入后端项目目录:

   ```bash
   cd backend
   ```

2. 清理并编译项目:

   ```bash
   mvn clean compile
   ```

3. 运行测试:

   ```bash
   mvn test
   ```

4. 打包项目:

   ```bash
   mvn package
   ```

5. 构建完成后，可在 `backend/target/` 目录下找到生成的可执行 JAR 文件(onlineshop-0.0.1-SNAPSHOT.jar)

### 前端构建步骤

1. 进入前端项目目录:

   ```bash
   cd frontend
   cd shop-front
   ```

2. 安装依赖:

   ```bash
   npm install
   ```

3. 构建项目:

   ```bash
   npm run build
   ```

4. 构建完成后，会在 `frontend/dist/` 目录下生成所有静态资源文件

## 4. 数据库配置

在构建和运行项目之前，需要配置数据库:

1. 安装 MySQL 8.0 或更高版本

2. 创建数据库:

   ```sql
   CREATE DATABASE onlineshop CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

3. 根据 [test.sql](javascript:void(0)) 文件创建表结构和初始数据

4. 在 `backend/src/main/resources/application.properties` 中配置数据库连接信息:

   ```properties
   propertiesspring.datasource.url=jdbc:mysql://localhost:3306/onlineshop?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
   spring.datasource.username=your_username
   spring.datasource.password=your_password
   ```

## 5. 运行应用

### 运行后端服务

```bash
cd backend
java -jar target/onlineshop-0.0.1-SNAPSHOT.jar
```

后端服务默认运行在端口 8080。

### 运行前端应用（开发模式）

```bash
cd frontend
npm run dev
```

前端应用默认运行在端口 5173。

## 6. 构建产物说明

### 后端构建产物

- `backend/target/onlineshop-0.0.1-SNAPSHOT.jar`: 可执行的 Spring Boot 应用程序
- `backend/target/onlineshop-0.0.1-SNAPSHOT.jar.original`: 源代码包

### 前端构建产物

- `frontend/dist/` 目录下的所有文件:
  - `index.html`: 主页面
  - `assets/` 目录: 包含编译后的 JavaScript、CSS 和其他静态资源

## 7. 部署说明

1. 将后端 JAR 文件部署到服务器
2. 运行后端服务: `java -jar onlineshop-0.0.1-SNAPSHOT.jar`
3. 将前端构建产物部署到 Web 服务器（如 Nginx、Apache）或 CDN
4. 配置前端应用指向正确的后端 API 地址

## 8. 故障排除

### Maven 构建问题

- 如果依赖下载失败，请检查网络连接和 Maven 仓库配置
- 确保使用正确的 Java 版本 (JDK 17)

### npm 构建问题

- 如果遇到依赖问题，尝试删除 `node_modules` 目录和 [package-lock.json](javascript:void(0)) 文件后重新运行 `npm install`

### 数据库连接问题

- 确保 MySQL 服务正在运行
- 检查数据库连接配置是否正确
- 确保数据库用户具有正确的权限
