<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.onlineshop.mapper.ProductMapper">

    <resultMap id="ProductMap" type="com.example.onlineshop.entity.Product">
        <id property="product_id" column="product_id"/>
        <result property="product_name" column="product_name"/>
        <result property="product_desc" column="product_desc"/>
        <result property="image_url" column="image_url"/>
        <result property="price" column="price"/>
        <result property="product_status" column="product_status"/>
        <result property="created_at" column="created_at"/>
        <result property="updated_at" column="updated_at"/>
        <result property="seller_id" column="seller_id"/>
    </resultMap>

    <select id="findOnlineProducts" resultMap="ProductMap">
        SELECT * FROM products WHERE product_status = 'online'
    </select>

    <select id="findById" parameterType="int" resultMap="ProductMap">
        SELECT * FROM products WHERE product_id = #{productId}
    </select>

    <insert id="insert" parameterType="com.example.onlineshop.entity.Product" useGeneratedKeys="true" keyProperty="product_id">
        INSERT INTO products(product_name, product_desc, image_url, price, product_status, seller_id)
        VALUES(#{product_name}, #{product_desc}, #{image_url}, #{price}, #{product_status}, #{seller_id})
    </insert>

    <update id="updateStatus">
        UPDATE products SET product_status = #{status} WHERE product_id = #{productId}
    </update>

    <select id="findAllBySellerId" parameterType="int" resultMap="ProductMap">
        SELECT * FROM products WHERE seller_id = #{sellerId}
    </select>
</mapper>